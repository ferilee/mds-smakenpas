(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1083:(e,s,t)=>{"use strict";t.d(s,{SignOutButton:()=>r});var a=t(5155),n=t(6199);function r(){return(0,a.jsx)("button",{onClick:()=>(0,n.CI)({callbackUrl:"/login"}),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50",children:"Keluar"})}},4758:(e,s,t)=>{"use strict";t.d(s,{DailyChecklist:()=>i});var a=t(5155),n=t(2115);let r={PILAR_UTAMA:"Pilar Utama",SUNNAH:"Sunnah Boost",LITERASI:"Literasi",AKHLAK:"Social & Akhlak"};function i(){let[e,s]=(0,n.useState)([]),[t,i]=(0,n.useState)([]),[l,o]=(0,n.useState)(!0),[d,c]=(0,n.useState)(""),[m,u]=(0,n.useState)(0),[h,p]=(0,n.useState)(!1),[x,b]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{let[e,t]=await Promise.all([fetch("/api/missions",{cache:"no-store"}),fetch("/api/reports/today",{cache:"no-store"})]);if(e.ok&&s((await e.json()).missions||[]),t.ok){var a;let e=await t.json();(null==(a=e.report)?void 0:a.answers)&&(i(e.report.answers.selectedMissionIds||[]),o(!!e.report.answers.fasting),u(e.report.answers.sunnahBoost||0),c(e.report.narration||""))}})()},[]);let g=(0,n.useMemo)(()=>e.reduce((e,s)=>{var t;return e[t=s.category]||(e[t]=[]),e[s.category].push(s),e},{}),[e]),j=async()=>{p(!0),b("");let e=await fetch("/api/reports/today",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedMissionIds:t,fasting:l,narration:d,sunnahBoost:m})}),s=await e.json();if(!e.ok){b(s.message||"Gagal menyimpan laporan."),p(!1);return}b("Laporan tersimpan. XP hari ini: ".concat(s.xp.xpGained)),p(!1)};return(0,a.jsxs)("section",{className:"rounded-2xl bg-white p-5 shadow-sm",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Daily Mission Checklist"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-600",children:"Isi quest harian untuk menambah XP dan menjaga streak istiqomah."}),(0,a.jsxs)("div",{className:"mt-4 space-y-5",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:l,onChange:e=>o(e.target.checked),className:"h-4 w-4 rounded border-slate-300"}),"Puasa hari ini"]}),Object.entries(g).map(e=>{let[s,n]=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-2 text-sm font-semibold uppercase tracking-wide text-brand-700",children:r[s]||s}),(0,a.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,a.jsxs)("label",{className:"flex items-center justify-between rounded-lg border border-slate-200 p-3",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.includes(e.id),onChange:()=>{var s;return s=e.id,void i(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s])},className:"h-4 w-4 rounded border-slate-300"}),e.title]}),(0,a.jsxs)("span",{className:"rounded-full bg-brand-100 px-2 py-1 text-xs font-semibold text-brand-800",children:["+",e.xp," XP"]})]},e.id))})]},s)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Sunnah Boost (0 - 100)"}),(0,a.jsx)("input",{type:"number",min:0,max:100,value:m,onChange:e=>u(Number(e.target.value||"0")),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Narasi Akhlak / Berbakti"}),(0,a.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),placeholder:"Contoh: membantu ibu mencuci piring.",className:"min-h-20 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm"})]}),(0,a.jsx)("button",{onClick:j,disabled:h,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:h?"Menyimpan...":"Simpan Laporan Hari Ini"}),x&&(0,a.jsx)("p",{className:"text-sm text-slate-700",children:x})]})]})}},6012:(e,s,t)=>{Promise.resolve().then(t.bind(t,4758)),Promise.resolve().then(t.bind(t,1083)),Promise.resolve().then(t.t.bind(t,2619,23))}},e=>{e.O(0,[619,199,441,255,358],()=>e(e.s=6012)),_N_E=e.O()}]);