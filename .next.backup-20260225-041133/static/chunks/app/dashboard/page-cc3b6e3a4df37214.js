(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4758:(e,t,s)=>{"use strict";s.d(t,{DailyChecklist:()=>o});var n=s(5155),a=s(2115);let r={PILAR_UTAMA:"Pilar Utama",SUNNAH:"Sunnah Boost",LITERASI:"Literasi",AKHLAK:"Social & Akhlak"};function o(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[l,i]=(0,a.useState)(!0),[c,d]=(0,a.useState)(""),[u,p]=(0,a.useState)(0),[h,x]=(0,a.useState)(!1),[m,y]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{let[e,s]=await Promise.all([fetch("/api/missions",{cache:"no-store"}),fetch("/api/reports/today",{cache:"no-store"})]);if(e.ok&&t((await e.json()).missions||[]),s.ok){var n;let e=await s.json();(null==(n=e.report)?void 0:n.answers)&&(o(e.report.answers.selectedMissionIds||[]),i(!!e.report.answers.fasting),p(e.report.answers.sunnahBoost||0),d(e.report.narration||""))}})()},[]);let b=(0,a.useMemo)(()=>e.reduce((e,t)=>{var s;return e[s=t.category]||(e[s]=[]),e[t.category].push(t),e},{}),[e]),g=async()=>{x(!0),y("");let e=await fetch("/api/reports/today",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedMissionIds:s,fasting:l,narration:c,sunnahBoost:u})}),t=await e.json();if(!e.ok){y(t.message||"Gagal menyimpan laporan."),x(!1);return}y("Laporan tersimpan. XP hari ini: ".concat(t.xp.xpGained)),x(!1)};return(0,n.jsxs)("section",{className:"rounded-2xl bg-white p-5 shadow-sm",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Daily Mission Checklist"}),(0,n.jsx)("p",{className:"mt-1 text-sm text-slate-600",children:"Isi quest harian untuk menambah XP dan menjaga streak istiqomah."}),(0,n.jsxs)("div",{className:"mt-4 space-y-5",children:[(0,n.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,n.jsx)("input",{type:"checkbox",checked:l,onChange:e=>i(e.target.checked),className:"h-4 w-4 rounded border-slate-300"}),"Puasa hari ini"]}),Object.entries(b).map(e=>{let[t,a]=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"mb-2 text-sm font-semibold uppercase tracking-wide text-brand-700",children:r[t]||t}),(0,n.jsx)("div",{className:"space-y-2",children:a.map(e=>(0,n.jsxs)("label",{className:"flex items-center justify-between rounded-lg border border-slate-200 p-3",children:[(0,n.jsxs)("span",{className:"flex items-center gap-2 text-sm",children:[(0,n.jsx)("input",{type:"checkbox",checked:s.includes(e.id),onChange:()=>{var t;return t=e.id,void o(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:"h-4 w-4 rounded border-slate-300"}),e.title]}),(0,n.jsxs)("span",{className:"rounded-full bg-brand-100 px-2 py-1 text-xs font-semibold text-brand-800",children:["+",e.xp," XP"]})]},e.id))})]},t)}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Sunnah Boost (0 - 100)"}),(0,n.jsx)("input",{type:"number",min:0,max:100,value:u,onChange:e=>p(Number(e.target.value||"0")),className:"w-full rounded-lg border border-slate-300 px-3 py-2 text-sm"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Narasi Akhlak / Berbakti"}),(0,n.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),placeholder:"Contoh: membantu ibu mencuci piring.",className:"min-h-20 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm"})]}),(0,n.jsx)("button",{onClick:g,disabled:h,className:"rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-60",children:h?"Menyimpan...":"Simpan Laporan Hari Ini"}),m&&(0,n.jsx)("p",{className:"text-sm text-slate-700",children:m})]})]})}},5609:(e,t,s)=>{"use strict";s.d(t,{SignOutButton:()=>ee});var n,a,r,o,l,i=s(5155),c=s(2115),d=s.t(c,2);class u extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let s=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${s}`}}class p extends u{}p.kind="signIn";class h extends u{}h.type="AdapterError";class x extends u{}x.type="AccessDenied";class m extends u{}m.type="CallbackRouteError";class y extends u{}y.type="ErrorPageLoop";class b extends u{}b.type="EventError";class g extends u{}g.type="InvalidCallbackUrl";class v extends p{constructor(){super(...arguments),this.code="credentials"}}v.type="CredentialsSignin";class f extends u{}f.type="InvalidEndpoints";class k extends u{}k.type="InvalidCheck";class w extends u{}w.type="JWTSessionError";class E extends u{}E.type="MissingAdapter";class N extends u{}N.type="MissingAdapterMethods";class S extends u{}S.type="MissingAuthorize";class A extends u{}A.type="MissingSecret";class j extends p{}j.type="OAuthAccountNotLinked";class U extends p{}U.type="OAuthCallbackError";class C extends u{}C.type="OAuthProfileParseError";class L extends u{}L.type="SessionTokenError";class T extends p{}T.type="OAuthSignInError";class R extends p{}R.type="EmailSignInError";class P extends u{}P.type="SignOutError";class _ extends u{}_.type="UnknownAction";class I extends u{}I.type="UnsupportedStrategy";class M extends u{}M.type="InvalidProvider";class O extends u{}O.type="UntrustedHost";class H extends u{}H.type="Verification";class X extends p{}X.type="MissingCSRF";class B extends u{}B.type="DuplicateConditionalUI";class D extends u{}D.type="MissingWebAuthnAutocomplete";class V extends u{}V.type="WebAuthnVerificationError";class W extends p{}W.type="AccountNotLinked";class $ extends u{}$.type="ExperimentalFeatureNotEnabled";class J extends u{}async function K(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a="".concat(t.basePath,"/").concat(e);try{var r;let e={headers:{"Content-Type":"application/json",...(null==n||null==(r=n.headers)?void 0:r.cookie)?{cookie:n.headers.cookie}:{}}};(null==n?void 0:n.body)&&(e.body=JSON.stringify(n.body),e.method="POST");let t=await fetch(a,e),s=await t.json();if(!t.ok)throw s;return s}catch(e){return s.error(new J(e.message,e)),null}}function q(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e="https://".concat(e));let s=new URL(e||t),n=("/"===s.pathname?t.pathname:s.pathname).replace(/\/$/,""),a="".concat(s.origin).concat(n);return{origin:s.origin,host:s.host,path:n,base:a,toString:()=>a}}var F=s(5704);let G={baseUrl:q(null!=(a=F.env.NEXTAUTH_URL)?a:F.env.VERCEL_URL).origin,basePath:q(F.env.NEXTAUTH_URL).path,baseUrlServer:q(null!=(o=null!=(r=F.env.NEXTAUTH_URL_INTERNAL)?r:F.env.NEXTAUTH_URL)?o:F.env.VERCEL_URL).origin,basePathServer:q(null!=(l=F.env.NEXTAUTH_URL_INTERNAL)?l:F.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}},z=null,Q={debug:console.debug,error:console.error,warn:console.warn};async function Y(){var e;let t=await K("csrf",G,Q);return null!=(e=null==t?void 0:t.csrfToken)?e:""}async function Z(e){var t,s;let{redirect:n=!0,redirectTo:a=null!=(t=null==e?void 0:e.callbackUrl)?t:window.location.href}=null!=e?e:{},r=G.basePath,o=await Y(),l=await fetch("".concat(r,"/signout"),{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({csrfToken:o,callbackUrl:a})}),i=await l.json();if((null===z&&(z="undefined"==typeof BroadcastChannel?{postMessage:()=>{},addEventListener:()=>{},removeEventListener:()=>{},name:"next-auth",onmessage:null,onmessageerror:null,close:()=>{},dispatchEvent:()=>!1}:new BroadcastChannel("next-auth")),z).postMessage({event:"session",data:{trigger:"signout"}}),n){let e=null!=(s=i.url)?s:a;window.location.href=e,e.includes("#")&&window.location.reload();return}return await G._getSession({event:"storage"}),i}function ee(){return(0,i.jsx)("button",{onClick:()=>Z({callbackUrl:"/login"}),className:"rounded-lg border border-slate-300 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50",children:"Keluar"})}null==(n=c.createContext)||n.call(d,void 0)},6012:(e,t,s)=>{Promise.resolve().then(s.bind(s,4758)),Promise.resolve().then(s.bind(s,5609)),Promise.resolve().then(s.t.bind(s,2619,23))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=6012)),_N_E=e.O()}]);